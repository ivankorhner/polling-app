### Polling App API Requests
### A story-driven walkthrough of the API

@baseUrl = http://localhost:8080
@contentType = application/json

### ============================================
### 1. Health Check
### ============================================

GET {{baseUrl}}/health

###

### ============================================
### 2. Register Two Users
### ============================================

### Register Alice
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "username": "alice",
  "email": "alice@example.com"
}

###

### Register Bob
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "username": "bob",
  "email": "bob@example.com"
}

###

### ============================================
### 3. Create First Poll (by Alice, user_id: 1)
### ============================================

POST {{baseUrl}}/polls
Content-Type: {{contentType}}

{
  "owner_id": 1,
  "title": "Best Programming Language?",
  "options": ["Go", "Rust", "Python", "JavaScript"]
}

###

### ============================================
### 4. Create Second Poll (by Bob, user_id: 2)
### ============================================

POST {{baseUrl}}/polls
Content-Type: {{contentType}}

{
  "owner_id": 2,
  "title": "Best Go Web Framework?",
  "options": ["Chi", "Gin", "Echo", "Fiber"]
}

###

### ============================================
### 5. List All Polls
### ============================================

GET {{baseUrl}}/polls

###

### ============================================
### 6. Get Poll 1 (before voting)
### ============================================

GET {{baseUrl}}/polls/1

###

### ============================================
### 7. Both Users Vote on Poll 1, Option 1 (Go)
### ============================================

### Alice votes for Go (option_id: 1)
POST {{baseUrl}}/polls/1/vote
Content-Type: {{contentType}}

{
  "option_id": 1,
  "user_id": 1
}

###

### Bob votes for Go (option_id: 1)
POST {{baseUrl}}/polls/1/vote
Content-Type: {{contentType}}

{
  "option_id": 1,
  "user_id": 2
}

###

### ============================================
### 8. Get Poll 1 (after voting - should show 2 votes on Go)
### ============================================

GET {{baseUrl}}/polls/1

###

### ============================================
### 9. Delete Poll 1
### ============================================

DELETE {{baseUrl}}/polls/1

###

### ============================================
### 10. Get Poll 1 (should return 404 Not Found)
### ============================================

GET {{baseUrl}}/polls/1

###
